<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />

<title>Light test</title>
<script src="jquery.js"></script>  

<script type="text/javascript">

var ip = '192.168.0.14';
var key = '16e91ccb3cf0cf2fe8915d3150b14b7';

            window.addEventListener('load', function() {
                document.body.addEventListener('touchmove', function(e) {
                    e.preventDefault();
                }, false);
            }, false);

(function( $ ) {
jQuery.support.cors = true;
    var methods = {
      init : function(options){},
      query : function(){
        url = 'http://'+ip+'/api/'+key;
        $('#output').append(url);

        //$.get(url,function(data){
        //  $('#output').append(JSON.stringify(data));
        //});

        var request = $.ajax({
          url: url,
          type: "GET",
        });

        request.done(function(msg) {
          $("#output").html( JSON.stringify(msg) );
        });

        request.error(function(jqXHR, textStatus) {
          alert( "Request failed: " + textStatus );
          $("#output").html( JSON.stringify(jqXHR) );
        });

      },
      turnOn : function( light ) {
         url = 'http://'+ip+'/api/'+key+'/lights/'+light+'/state';
        data = {"bri": 254, "on": true};
        var request = $.ajax({
          url: url,
          type: "PUT",
          data: JSON.stringify(data)
        });
      },
      turnOff : function( light) {
                url = 'http://'+ip+'/api/'+key+'/lights/'+light+'/state';
        data = {"on": false};
        var request = $.ajax({
          url: url,
          type: "PUT",
          data: JSON.stringify(data)
        });
      },
      hide : function( ) {},
      update : function( content ) {}
  };


    $.fn.hue = function( method ) {
      if ( methods[method] ) {
        return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
      } else if ( typeof method === 'object' || ! method ) {
        return methods.init.apply( this, arguments );
      } else {
        $.error( 'Method ' +  method + ' does not exist on jQuery.hue' );
      }
    };
})( jQuery );
</script>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- CSS
  ================================================== -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/layout.css">
</head>
<body>

<div class="container">
<div class="six columns clearfix">
    <a href="javascript:$().hue('turnOn',1)" class="full-width button">On</a>
  </div>
  <div class="six columns clearfix">
<a href="javascript:$().hue('turnOff',1)" class="full-width button">Off</a>
  </div>
  <div class="six columns clearfix">
    <a href="javascript:$().hue('turnOn',2)" class="full-width button">On</a>
  </div>
  <div class="six columns clearfix">
<a href="javascript:$().hue('turnOff',2)" class="full-width button">Off</a>
  </div>
  <div class="six columns clearfix">
    <a href="javascript:$().hue('turnOff',3)" class="full-width button">On</a>
  </div>
  <div class="six columns clearfix">
<a href="javascript:$().hue('turnOff',3)" class="full-width button">Off</a>
  </div>
<div class="twelve columns">
<div id="output">...</div>
</div>
</div>
<script type="text/javascript">


$('#getinfo').click(function(){$().hue('query');});
</script>
</body>
</html>